function l_KCl(a,b,c){a.Vug.set(b,c)}function l_LCl(a,b,c){a.qrh.set(b,c)}function l_MCl(a,b){const c=b.FBa;b=b.item;l_eg(a.r4g,c,[]).push(b);a.Smf.dispatchEvent(new l_IUf(c))}function l_NCl(a,b){var c;null==(c=a.Bb.value.get(l_4X(b)))||c.setContent(l_3X.yi,l_3X.mTe);c=a.YI.value.filter(e=>e!=b);a.YI.Oa(c);let d;c=null==(d=l_Cri(a,b))?void 0:d.type;a.fKa.O_(b);c&&l_pri(a.Atc,"deleted",c)}
function l_OCl(a,b){return new l_ye(a,c=>{const d=b.xi.get(c);return{pipe:new l_v(d||null,()=>[new l_(d?l_B.Jd(d.Ba.value):new l_B([]),l_KAj,l_CAj,l_DAj,l_EAj)],l_Ui(l_.hb)),bm:!0}})}var l_PCl={color:"color",shape:"shape",icon:"icon"},l_QCl=l_t('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <rect x="2" y="2" width="20" height="20" fill="url(#AdvancedColorPicker24Icon-icon-id-pattern0)"/>\n        <defs>\n            <pattern id="AdvancedColorPicker24Icon-icon-id-pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">\n                <use xlink:href="#AdvancedColorPicker24Icon-icon-id-image0" transform="scale(0.0227273)"/>\n            </pattern>\n            <image id="AdvancedColorPicker24Icon-icon-id-image0" width="44" height="44" xlink:href="data:image/png;base64,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"/>\n        </defs>\n    </svg>');var l_RCl=class extends l_$t{constructor(a,b){super();this.properties=a;this.Yd=b;for(const c of a)l_9t(this,c)}Cd(){const a=[];var b;const c=null==(b=this.Yd.d1.value)?void 0:b.id;b=new Map;if(!c)return[];for(var d of this.properties){const e=d.N1();for(const f in e){if(e[f].color.fC())continue;const g=e[f].Gdb.get(c);if(g){let h;const k=null!=(h=b.get(c))?h:{};b.has(c)||b.set(c,k);f in k?k[f].count+=g:k[f]={count:g,color:e[f].color,Gdb:new Map}}}}for(const [e,f]of b.entries())d=f,e===c&&a.push(...l_wpd(d));
return a}Wf(){return!1}};var l_SCl=class{constructor(){this.ba={FHd:i18n.get("legend-item-control-colors-tab-label"),X9j:i18n.get("legend-item-control-shapes-tab-label")};this.zwi={type:"color",icon:l_QCl,label:this.ba.FHd};this.b$j={type:"shape",icon:l_Cp,label:this.ba.X9j};this.tabs=[this.zwi,this.b$j]}};l_SCl=__decorate([l_s(),__metadata("design:paramtypes",[])],l_SCl);var l_TCl=class{constructor(a){this.rb=a}TWa(){l_pC(this.rb,"StampStickyNote")}};l_TCl=__decorate([l_s(),__metadata("design:paramtypes",[l_rC])],l_TCl);var l_UCl=class{constructor(a){this.Ig=a;this.ba={description:i18n.get("legend-item-control-shapes-tab-zero-state-description")};this.imageUrl=l_tj+"/app/chart/dialogs/legend-block/zero-state.svg";this.imageWidth=84;this.imageHeight=44;this.Ig.vk(245)}};l_UCl.oa=function(a){return new (a||l_UCl)(l_L(l_Sm))};
l_UCl.Ka=l_G({type:l_UCl,Ca:[["lucid-legend-shapes-tab-zero-state"]],Ja:4,Ia:4,Ma:[[1,"zero-state-content"],[1,"empty-selection",3,"imgUrl","imgWidth","imgHeight"],[1,"description"]],template:function(a,b){a&1&&(l_Q(0,"div",0)(1,"lucid-empty-state",1)(2,"div",2),l_W(3),l_R()()());a&2&&(l_M(1),l_P("imgUrl",b.imageUrl)("imgWidth",b.imageWidth)("imgHeight",b.imageHeight),l_M(2),l_X(b.ba.description))},La:[l_WF],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}[_nghost-%COMP%]   .zero-state-content[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px dashed var(--lucid-design-token-foreground-accent-color-css-var,#ced4db);border-radius:8px;margin:16px}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{padding-top:8px;color:var(--lucid-design-token-primary-foreground-color-css-var,#282c33);font-size:14px;line-height:20px;font-weight:var(--lucid-theme-normal-font-weight,400);font-style:normal;font-stretch:normal}"],
changeDetection:0});var l_VCl=class extends l_g{constructor(a,b){super();this.VO=b;this.iaf=new Map;this.Ha=new l_Yn(this);this.Ha.listen(a,l_1J,()=>{this.iaf.clear()});this.VO.listen(l_cri,c=>{this.iaf.set(c.wrj,new Set(c.eUj))})}};l_VCl=__decorate([l_s(),__metadata("design:paramtypes",[l_0J,l_gri])],l_VCl);var l_WCl=class extends l_g{constructor(a,b){super();this.Ra=b;this.Dwg="shape";this.WT=a.jI(l_6X.className,{lastUsedTab:{defaultValue:this.Dwg}})}};l_WCl=__decorate([l_s(),__metadata("design:paramtypes",[l_mu,l_mq])],l_WCl);var l_XCl=class extends l_RCl{constructor(a,b,c){super([a,b],c)}};l_XCl=__decorate([l_s(),__metadata("design:paramtypes",[l_YSe,l__Se,l_mL])],l_XCl);function l_YCl(a,b){if(a&1){const c=l_I();l_Q(0,"div",7);l_T("lucidClick",function(){const d=l_J(c).Fa,e=l_U(2);return l_K(e.select(d))});l_Z(1,"lucidPipeValue");l_S(2,"lucid-shape-display-item",8);l_R()}a&2&&(a=b.Fa,b=l_U(2),l_V("existing",l__(1,3,b.hlj.pipe(a))),l_M(2),l_P("toolboxDisplayItem",a))}function l_ZCl(a){a&1&&(l_Q(0,"div",3)(1,"p",4),l_W(2),l_R(),l_Q(3,"div",5),l_O(4,l_YCl,3,5,"div",6),l_R()());a&2&&(a=l_U(),l_M(2),l_X(a.ba.U9j),l_M(2),l_P("ngForOf",a.items))}
function l__Cl(a){a&1&&(l_Q(0,"div"),l_S(1,"lucid-legend-shapes-tab-zero-state"),l_R())}function l_0Cl(a){return l_c(function*(){const b=a.Ig.rm(245);return 0===a.items.length||!(yield b)})}
var l_1Cl=class extends l_g{constructor(a,b){super();this.Ljf=a;this.Ig=b;this.items=[];this.qfb=[];this.Gib=new l_0;this.zrj=new l_zc(l_6X.RC,l_6X.RC);this.Grk=new l_ye(this,c=>({pipe:new l_8q(null,()=>l_uri(c,this.zrj),void 0,l_Qj(l_iri)),bm:!0}));this.hlj=new l_ye(this,c=>({pipe:new l_v(null,()=>this.qfb.some(d=>l_Pj(d,this.Grk.value(c),l_iri)),l_d),bm:!0}));this.ba={U9j:i18n.get("legend-item-control-shapes-in-use-label")}}ngOnInit(){this.JMa=l_0Cl(this)}select(a){this.Gib.emit(a)}};
l_1Cl.oa=function(a){return new (a||l_1Cl)(l_L(l_zri),l_L(l_Sm))};
l_1Cl.Ka=l_G({type:l_1Cl,Ca:[["lucid-legend-shapes-tab"]],inputs:{items:"items",qfb:"existingShapeItems"},outputs:{Gib:"itemSelected"},features:[l_N],Ja:4,Ia:5,Ma:[[3,"vertical"],["class","siu-wrapper",4,"ngIf"],[4,"ngIf"],[1,"siu-wrapper"],[1,"siu-label"],[1,"shapes-container"],["class","shape-container",3,"existing","lucidClick",4,"ngFor","ngForOf"],[1,"shape-container",3,"lucidClick"],[3,"toolboxDisplayItem"]],template:function(a,b){a&1&&(l_Q(0,"lucid-scrollable",0),l_O(1,l_ZCl,5,2,"div",1),l_O(2,
l__Cl,2,0,"div",2),l_Z(3,"async"),l_R());a&2&&(l_P("vertical",!0),l_M(1),l_P("ngIf",!!b.items.length),l_M(1),l_P("ngIf",l__(3,3,b.JMa)))},La:[l_Dy,l_2,l_5,l_JB,l_N0g,l_UCl,l_Ky,l_PA],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;max-width:344px}lucid-scrollable[_ngcontent-%COMP%]{max-height:236px}.siu-wrapper[_ngcontent-%COMP%]{padding:0 16px}.siu-label[_ngcontent-%COMP%]{font-size:12px;line-height:16px;font-weight:var(--lucid-theme-normal-font-weight,400);font-style:normal;font-stretch:normal;margin-top:16px;color:var(--lucid-design-token-secondary-foreground-color-css-var,#6f7681)}.shapes-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:4px}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]{width:40px;height:40px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.shapes-container[_ngcontent-%COMP%]   .shape-container.existing[_ngcontent-%COMP%]{border:1px solid var(--lucid-design-token-foreground-accent-color-css-var,#ced4db);border-radius:4px}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]:hover{background:var(--lucid-design-token-secondary-background-color-css-var,rgba(40,44,51,.08))}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]   lucid-shape-display-item[_ngcontent-%COMP%]{border-radius:4px;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:-webkit-transform .15s ease-in-out;-o-transition:transform .15s ease-in-out;transition:transform .15s ease-in-out;transition:transform .15s ease-in-out,-webkit-transform .15s ease-in-out}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]   lucid-shape-display-item[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5)}"],
changeDetection:0});__decorate([l_zr(),__metadata("design:type",Array)],l_1Cl.prototype,"qfb",void 0);l_1Cl=__decorate([l_Jb,__metadata("design:paramtypes",[l_zri,l_Sm])],l_1Cl);function l_2Cl(a){a=a.Awi.value;return 0<a.length?(a=a.map(b=>({type:"color",yi:l_6X.yi,value:b})),l_Rri(a)):l_6X.Ic()}
var l_3Cl=class extends l_g{constructor(a,b,c,d,e,f){super();this.MRe=a;this.Mfi=b;this.Ra=c;this.CA=d;this.viewport=e;this.yRa=f;this.Awi=new l_v(this,()=>{const g=[...this.Mfi.Qa()],h=new Set([...l_tgd(this.MRe,!0)].map(k=>k.serialize()));return g.filter(k=>{k=k.serialize();return h.has(k)?!1:!0})},l_Ui(l_4j))}O5c(a,b){a=a?l_2Cl(this):l_6X.Ic();a.className=l_6X.className;a.BoundingBox=l_ydf(this.viewport,l_6X.Ct,l_6X.Fs);a.DynamicFontSize=this.yRa.JSb;const c=this.viewport.d1.value;c&&(this.CA.Ds(c,
a,b)||this.Ra.je("Not able to generate the new legend block. Talk to Di Ying or chart1 team to figure this issue out"))}};l_3Cl=__decorate([l_s(),__metadata("design:paramtypes",[l_ugd,l_XCl,l_mq,l_$J,l_mL,l_uz])],l_3Cl);function l_4Cl(a,b){a&1&&(l_Q(0,"lucid-finger-tab",5),l_S(1,"lucid-icon",6),l_Q(2,"span"),l_W(3),l_R()());a&2&&(a=b.Fa,l_P("tabName",a.type)("lucidClickIdentifier","legend-item-control-tab-"+a.type),l_M(1),l_P("icon",a.icon),l_M(2),l_X(a.label))}function l_5Cl(a){if(a&1){const b=l_I();l_Q(0,"lucid-basic-color-picker",7);l_T("valueChange",function(c){l_J(b);l_U().L3d.emit({item:{type:"color",yi:l_6X.yi,value:c}});return l_K()});l_R()}a&2&&(a=l_U(),l_P("value",l_6Cl(a))("showColorsInUse",!0))}
function l_7Cl(a){if(a&1){const b=l_I();l_Q(0,"lucid-legend-shapes-tab",8);l_T("itemSelected",function(c){l_J(b);const d=l_U();return l_K(l_8Cl(d,c))});l_Z(1,"lucidPipeValue");l_R()}a&2&&(a=l_U(),l_P("items",l__(1,2,a.wCc.joe))("existingShapeItems",a.qfb))}function l_6Cl(a){let b;return"color"!==(null==(b=a.u_b)?void 0:b.type)?l_p:a.u_b.value}
function l_8Cl(a,b){return l_c(function*(){const c=yield l_uri(b,new l_zc(l_6X.RC,l_6X.RC)),d={type:"shape",value:b.className};c&&a.L3d.emit({item:c,Gx:"from diagram key shape tab",jua:d})})}
var l_9Cl=class extends l_cz{constructor(a,b,c,d){super();this.yrj=a;this.wCc=b;this.Ljf=c;this.tyg=d;this.qfb=[];this.L3d=new l_0;this.UZf=new l_w(this,void 0,l_d);this.Hph=new l_v(this,()=>{let e,f,g;return null!=(g=null!=(f=this.UZf.value)?f:null==(e=this.u_b)?void 0:e.type)?g:"color"},l_d);this.t4f=l_PCl}ngOnInit(){if(!this.u_b){var a=this.UZf;var b=this.tyg;try{var c=b.WT.lastUsedTab}catch(d){c="Not able to read DiagramKeyUserStorage['lastUsedTab'].",d instanceof Error&&(c=d.message,d.message=
"Not able to read DiagramKeyUserStorage['lastUsedTab']."),b.Ra.handleError({error:d,severity:"Minor",context:{sourceError:c}}),c=b.Dwg}a.value=c}}iFc(a){Object.values(l_PCl).includes(a)&&(this.UZf.setValue(a),this.tyg.WT.lastUsedTab=a)}ngOnDestroy(){super.Mb()}};l_9Cl.oa=function(a){return new (a||l_9Cl)(l_L(l_SCl),l_L(l_IVg),l_L(l_zri),l_L(l_WCl))};
l_9Cl.Ka=l_G({type:l_9Cl,Ca:[["lucid-legend-item-control"]],inputs:{u_b:"legendItem",qfb:"existingShapeItems"},outputs:{L3d:"legendItemChange"},features:[l_N],Ja:7,Ia:11,Ma:[[1,"horizontal",3,"spaceAround","value","noMargin","valueChange"],["class","light no-select-bg horizontal underline-style lucid-finger-tab-hover-animation condensed","data-test-id","'legend-item-control-tab-'+tab.type",3,"tabName","lucidClickIdentifier",4,"ngFor","ngForOf"],[1,"content",3,"ngSwitch"],[3,"value","showColorsInUse",
"valueChange",4,"ngSwitchCase"],[3,"items","existingShapeItems","itemSelected",4,"ngSwitchCase"],["data-test-id","'legend-item-control-tab-'+tab.type",1,"light","no-select-bg","horizontal","underline-style","lucid-finger-tab-hover-animation","condensed",3,"tabName","lucidClickIdentifier"],[3,"icon"],[3,"value","showColorsInUse","valueChange"],[3,"items","existingShapeItems","itemSelected"]],template:function(a,b){a&1&&(l_Q(0,"lucid-inline-finger-tabs",0),l_T("valueChange",function(c){return b.iFc(c)}),
l_Z(1,"lucidPipeValue"),l_O(2,l_4Cl,4,4,"lucid-finger-tab",1),l_R(),l_Q(3,"div",2),l_Z(4,"lucidPipeValue"),l_O(5,l_5Cl,1,2,"lucid-basic-color-picker",3),l_O(6,l_7Cl,2,4,"lucid-legend-shapes-tab",4),l_R());a&2&&(l_P("spaceAround",!0)("value",l__(1,7,b.Hph))("noMargin",!0),l_M(2),l_P("ngForOf",b.yrj.tabs),l_M(1),l_P("ngSwitch",l__(4,9,b.Hph)),l_M(2),l_P("ngSwitchCase",b.t4f.color),l_M(1),l_P("ngSwitchCase",b.t4f.shape))},La:[l_Dy,l_Ey,l_Fy,l_fy,l_DT,l_nQ,l_$P,l_EB,l_1Cl,l_PA],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background:#fff;border-radius:4px;overflow:hidden;min-height:300px}lucid-finger-tab[_ngcontent-%COMP%]{width:56px}lucid-finger-tab[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{max-width:56px;margin-top:4px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;font-size:14px;line-height:20px;font-weight:var(--lucid-theme-normal-font-weight,400);font-style:normal;font-stretch:normal}"],
changeDetection:0});function l_$Cl(a,b){a.hX.lcb();let c;const d=a.Gv.ys({Sn:l_9Cl,mJ:"left",Wq:e=>{e.instance.u_b=b.u_b;e.instance.qfb=b.qfb;c=e.instance.L3d.subscribe(({item:f,Gx:g,jua:h})=>{b.e8j({item:f,Gx:g,jua:h});let k;null==(k=a.mEb)||k.close()})},Oc:b.pBd,wPb:!0});d&&(a.mEb=d,a.mEb.NW.then(()=>{a.mEb===d&&(a.mEb=void 0);let e;null==(e=c)||e.unsubscribe()}))}
var l_aDl=class{constructor(a,b,c){this.Gv=a;this.VO=b;this.hX=c}initialize(){this.VO.listen(l_ari,a=>{l_$Cl(this,a)});this.VO.listen(l_dri.id,()=>{let a;null==(a=this.mEb)||a.close()})}};l_aDl=__decorate([l_s(),__metadata("design:paramtypes",[l_5n,l_gri,l_7J])],l_aDl);var l_bDl=class{};l_bDl.oa=function(a){return new (a||l_bDl)};l_bDl.Wa=l_H({type:l_bDl});l_bDl.Va=l_E({imports:[l_3,l_QA,l_0C,l_IT,l_tQ,l_GB,l_PB,l_5S,l_sG,l_tH,l_QA,l_PB,l_Jz]});var l_cDl=class{};l_cDl.oa=function(a){return new (a||l_cDl)};l_cDl.Wa=l_H({type:l_cDl});l_cDl.Va=l_E({imports:[l_bDl]});function l_D3(a){let b;return null!=(b=l_JXh(a.deps.selection,l_6X))?b:void 0}var l_E3=class extends l_OL{constructor(a,b,c,d){super(a);this.deps=a;this.VQg=new l_v(this,()=>{{var e=l_D3(this);const f=[];if(e)for(const g of e.YI.value){const h=l_5X(e,g);f.push(h+e.RC.value/2+e.location.value.y)}e=f}return e},l_d);this.fme=[b,d,c]}Be(a){return a.Be("c")}};l_E3=__decorate([l_rm(),__metadata("design:paramtypes",[l_ML,l_gsi,l_dwf,l_esi])],l_E3);var l_dDl=class extends l_E3{constructor(a,b){super(...a);this.PLd=b;this.name="legend-block-add-item";this.ba={Ucg:i18n.get("legend-block-hint-add-item")};this.aL=this.MF=!0}cursor(a){if(this.Ij(a))return"pointer"}Kp({element:a,$b:b}){if(a&&l_D.Rb(a)&&this.mYb){if(l_Sl(b.ab,this.mYb)&&a instanceof l_6X){const c=l_Fri(a);if(!l_f(c))return!1;l_eri(this.PLd,a.id,void 0,l_Lri(a)).then(({item:d,Gx:e,jua:f})=>{l_Hri(a,c,d,e,f)});this.deps.selection.deselectAll();this.deps.selection.Tk(a.id);l_fri(this.PLd,
new l_2X(a.id,[c]));return!0}return!1}}Kua(a){return this.Ij(a)}Ij({$b:a,aq:b}){return b?!!this.mYb&&l_Sl(a.ab,this.mYb):!1}HFb(a){const b=a.Vf,c=a.page;a=a.Lr;this.mYb=void 0;a=l_am(a);var d=l_D3(this);if(d&&d.page.value===c&&a===c&&!l_BJ(this.sd,d)&&!this.Be(d)){a=d.Ba.value;var e=window.devicePixelRatio||1,f=d.Via.value;d=`renderAddLegendItem,${a.x},${a.y},${a.w},${a.h},${e},${f}`;const l=l_6X.RC*f;var g=2*f,h=6*f;const m=4*f,n=4*f,p=new l_k(l_6X.TS*f,a.h-.4*l);f={size:12*f,lineWidth:0,padding:6*
f};var {w:k}=b.measureText([this.ba.Ucg],f);k=new l_r(l/2,0,k/e,l);e=[];e.push(l_Xt(new l_B([new l_A(k.x,k.y),new l_z(k.x+k.w,k.y),new l_z(k.x+k.w,k.y+l),new l_z(k.x,k.y+l),new l_x]),{fillColor:l_kk}),l_Xt(new l_B([...l_1Gf({x:k.x+k.w-l/2,y:k.y,w:l,h:l},l/2),new l_x]),{strokeColor:l_kk,lineWidth:l/2}),l_Xt(new l_B([...l_1Gf({x:0,y:0,w:l,h:l},l/2),new l_x]),{strokeColor:l_Qk,lineWidth:l/2}),l_Xt(new l_B([new l_A(l/2,h),new l_z(l/2,l-h),new l_A(h,l/2),new l_z(l-h,l/2)]),{fillColor:l_o,lineWidth:g,strokeColor:l_o,
lineCap:"round",Na:l_o.vc}));g=new l_r(0,0,k.w+l,k.h);h=l_ak(a.x+p.x,a.y+p.y);b.Km({key:d,Kd:e,lb:g,Vk:!1,transform:{Gj:c.id,gj:h}});this.mYb=l_r.translate(g,a.x+p.x,a.y+p.y);b.QD({text:this.ba.Ucg,x:this.mYb.x+l+m,y:this.mYb.y+n,options:Object.assign({},f,{Jh:l_sk,padding:0,fillColor:l_p,GJ:!0,qO:!0}),pageId:c.id})}}};l_dDl=__decorate([l_s(),__param(0,l_wm(l_E3)),__metadata("design:paramtypes",[void 0,l_gri])],l_dDl);function l_eDl(a,b,c){const d=c.Ba.value;a:{if(a=l_D3(a))for(e of a.YI.value){const f=a.Ba.value;let g;const h={x:f.x,y:f.y+l_5X(a,e),h:Math.max(null!=(g=a.Ctc.get(e))?g:0,a.RC.value),w:f.w};if(l_Sl(b,h)){var e={JKm:e,Bmh:h};break a}}e=void 0}return e?l_Sl(b,{x:d.x+d.w-c.TS.value,y:e.Bmh.y,w:c.RC.value,h:e.Bmh.h}):!1}
var l_fDl=class extends l_E3{constructor(a,b){super(...a);this.PLd=b;this.name="legend-block-delete-row"}Kp(a){const b=l_D3(this);if(b&&l_YJ(this.selection,b.id)&&l_eDl(this,a.$b.ab,b)&&!this.Be(b)){this.PLd.dispatchEvent(new l_2X(b.id,[]));{a=a.$b.ab;const c=l_D3(this);c?(a=c.YI.value[c.hoc(a)],a=0<=a?a:void 0):a=void 0}a&&l_NCl(b,a);return a?!0:!1}return!1}cursor({element:a,$b:b}){const c=l_D3(this);if(c&&c.id===(null==a?void 0:a.id))return l_eDl(this,b.ab,c)?"pointer":void 0}Vh({Vf:a,page:b,zoom:c}){const d=
l_D3(this);if(d&&!this.Be(d)){const e=d.Ba.value.x+d.Ba.value.w-d.TS.value/2;for(const f of this.VQg.value)l_IL(a,{ab:{x:e,y:f},page:b,icon:l_Ip,scale:c*d.Via.value,Mi:new l_Ga(d.id)})}}};l_fDl=__decorate([l_s(),__param(0,l_wm(l_E3)),__metadata("design:paramtypes",[void 0,l_gri])],l_fDl);var l_gDl=class extends l_E3{constructor(){super(...arguments);this.name="legend-block-drag-handles"}Vh({Vf:a,page:b,zoom:c}){const d=l_D3(this);if(d&&!this.Be(d)){const e=d.Ba.value.x+d.TS.value/2;for(const f of this.VQg.value)l_IL(a,{ab:{x:e,y:f},page:b,icon:l_fp,scale:c*d.Via.value,Mi:new l_Ga(d.id)})}}Be(a){return super.Be(a)||a.Be("p")}};l_gDl=__decorate([l_s()],l_gDl);function l_hDl(a,b){const c=l_Cri(a,b),d=[];c||d;const e=(l,m)=>{const n=l.x,p=l.y,q=l.h;l=l.w;return new l_B([new l_A(n+l,p+q-m),new l_Rt(n+l,p+q,n+l-m,p+q,m),new l_z(n+m,p+q),new l_Rt(n,p+q,n,p+q-m,m),new l_z(n,p+m),new l_Rt(n,p,n+m,p,m),new l_z(n+l-m,p),new l_Rt(n+l,p,n+l,p+m,m),new l_x])},f=(l,m)=>{switch(m){case "color":return new l_B([...l_lu(l),new l_x]);case "shape":return e(l,2);default:return new l_B([])}},g=a.location.value.x+a.TS.value,h=a.location.value.y+l_5X(a,b);c&&d.push(l_Xt(f({x:g,
y:h,w:a.RC.value,h:a.RC.value},c.type),{fillColor:void 0,lineWidth:2,Lc:!0,strokeColor:l_Pk,oVa:!0,strokeStyle:"solid"}));let k;b={x:a.location.value.x+.125*l_6X.TS,y:a.location.value.y+l_5X(a,b),h:Math.max(a.RC.value,null!=(k=a.Ctc.get(b))?k:0),w:a.Ba.value.w-.25*l_6X.TS};d.push(l_Xt(e(b,4),{fillColor:l_Pk.xa(.1)}));return d}function l_iDl(a,b){const c=[];b.forEach(d=>{(d=l_Cri(a,d))&&c.push(d.type.toString())});return c}
var l_jDl=class extends l_E3{constructor(a,b){super(...a);this.$Li=b;this.name="legend-row-highlight";this.aL=this.MF=!1}Vh({Vf:a,page:b}){var c=window.devicePixelRatio||1;const d=l_D3(this);if(d){var e,f=null!=(e=this.$Li.iaf.get(d.id))?e:new Set;e=d.YI.value;const g=l_iDl(d,f),h=[];f.forEach(l=>{h.push(...l_hDl(d,l))});const k=d.Ba.value;c=`renderLegendRowHighlight,${k.x},${k.y},${k.w},${k.h},${c},${[...f].join("-")},${e.join("-")},${g.join("-")}`;f=l_Zt(h);a.Km({key:c,Kd:h,lb:f,Vk:!1,transform:{Gj:b.id,
gj:new l_bk}})}}};l_jDl=__decorate([l_s(),__param(0,l_wm(l_E3)),__metadata("design:paramtypes",[void 0,l_VCl])],l_jDl);function l_kDl(a){const b=new l_rBc(i18n.get("tool-group-create-diagram-key"),()=>{a.O5c.O5c(!0,"button from shape panel")},"addNewDiagramKeyUnderShapeInUseButton");l_LCl(a.pe,a.id,[b])}
var l_lDl=class extends l_dBj{constructor(a,b,c,d,e,f,g,h,k,l,m,n,p,q,r,t,u,v,w,x=[],y,z,A){super(a,d,g,v,x);this.IN=f;this.O5c=t;this.Tjf=u;this.Wyh=y;this.Fih=z;this.gHd=A;l_kDl(this);l_Hm(q,{Af:[l_9Cl],module:l_cDl});c.wnb();b.wnb();l_eO(h,{className:l_LV.className,ZW:k.Eo()?"shape-change-panel font-picker font-size text-color text-emphasis text-alignment text-list-style item-link lock tridot".split(" "):[],kPa:["font-picker","font-size","text-color"]});e.promise.then(()=>{const B=this;return l_c(function*(){const F=
yield B.U1();F&&B.IN.Zwg.set("chart",F);yield B.Tjd()})});l_ILi(A,this.Ha,()=>this.Tjd());l_eO(h,{className:l_MAj,kPa:["crop-image-fill","image-fill-position","item-link","emoji"]});for(const B of[l,m,n,p])for(const F of B.fme)F.y4(B);r.initialize();b={action:()=>{this.O5c.O5c(!1,"selected from insert menu")},Xs:i18n.get("menu-item-add-diagram-key-additional-terms"),id:"add-diagram-key",label:i18n.get("menu-item-add-diagram-key"),itc:["left-align-content"]};l_MCl(this.Tjf,{FBa:"insert",item:b});l_KCl(w,
l_IAj,l_OCl(this,a.document))}U1(a=!1){const b=this;return l_c(function*(){const c="T-B"===l_pC(b.Wyh.rb,"StampStickyNote",!0),d=c?"DefaultStickyNoteBlock":l_bBj.className;var e=l_sbf(b.Fih,b.id,d);if(e){e=yield(yield l_gN(b.Fih,e)).zX();e=l_Mc(e);var f={},g={};if(a&&c){const {QNb:h,hCd:k}=l_HLi(b.gHd);if(!h)return;f=l_Gd([l_j.newValue(h.serialize())]);g.color=k.serialize()}return{className:d,qx:f,HN:e,ir:g,Gei:h=>{c||l_rCe(h);b.Wyh.TWa()}}}})}Tjd(){const a=this;return l_c(function*(){const b=yield a.U1(!0);
var c=a.IN;b?c.tFe.set("chart",b):c.tFe.delete("chart")})}};l_lDl=__decorate([l_s(),__param(3,l_tm(l_6hc)),__param(4,l_sm(l__m)),__param(19,l_um(l_L$c)),__metadata("design:paramtypes",[l_6I,l_NLi,l_Knj,Object,Object,l_Csf,l_uz,l_fO,l_LC,l_fDl,l_gDl,l_dDl,l_jDl,l_Im,l_aDl,l_3Cl,l_1Uf,l_gPe,l_lec,Array,l_TCl,l_9K,l_JLi])],l_lDl);l_7I.set("defaultview",l_lDl);
//# sourceURL=/js/application/chart_app/chunk/defaultview.js?compiled=1
