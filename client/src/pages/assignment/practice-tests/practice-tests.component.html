<nz-page-header [nzTitle]="'Practice Tests'">
</nz-page-header>
<nz-alert nzType="info" nzMessage="The allotted time for each test is 2 hours and starts immediately you select one"
    nzShowIcon></nz-alert>

<div class="content-container">
    <nz-list [nzDataSource]="practiceTests" [nzRenderItem]="itemTemplate">
        <ng-template #itemTemplate let-item>
            <nz-list-item>
                <nz-list-item-meta [nzTitle]="nzTitleTemplate">
                    <ng-template #nzTitleTemplate>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <nz-avatar [nzGap]="4" [ngStyle]="{ 'background-color': color }"
                                [nzText]="item.title.subject" nzSize="large"
                                style="vertical-align: middle;"></nz-avatar>
                            <app-modal modalBtnTxt="Start Test" [modalTitle]="'Practice' + ' / ' + item.title.subject"
                                [modalContentRef]="testModal" (onOpen)="showModal(item.title.subject)"
                                [modalFooterBtns]="testModalButtons">
                            </app-modal>
                        </div>
                    </ng-template>
                </nz-list-item-meta>
            </nz-list-item>
        </ng-template>
    </nz-list>
</div>

<ng-template #testModal>
    <div class="timer-section" style="position: relative;margin-bottom: 20px;">
        <sapn nz-typography style="position: absolute; right: 16px;"><strong>{{ hoursDisplay }}:{{ minutesDisplay
                }}:{{ secondsDisplay }}</strong></sapn>
    </div>
    <div>
        <span>{{currentIndex + 1}}.</span>
        <span style="margin-left: 4px;" nz-typography>{{ questions[currentIndex].question }}</span>
        <div style="margin-top: 12px;">
            <nz-radio-group [(ngModel)]="questions[currentIndex].selectedOption">
                <label nz-radio [nzValue]="options[i]"
                    *ngFor="let option of questions[currentIndex].options; let i = index">{{options[i]}}.
                    {{option}}</label>
            </nz-radio-group>
        </div>
    </div>
    <div style="margin-top: 12px;">
        <button nz-button [disabled]="currentIndex <= 0" nzType="default"
            (click)="goToPreviousQuestion()">Previous</button>
        <button nz-button *ngFor="let question of questions; let i = index" [nzType]="getButtonType(i)"
            [nzLoading]="isCurrentQuestion(i)" (click)="currentIndex = i">
            {{ i + 1 }}
        </button>
        <button nz-button [disabled]="currentIndex >= questions.length - 1" nzType="default"
            (click)="goToNextQuestion()">Next</button>
    </div>
</ng-template>